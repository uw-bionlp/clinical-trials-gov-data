Inclusion criteria:
  -  age over 18 years
  -  having a clinical diagnose of insomnia
  -  being treated for heart failure, coronary artery disease or atrial fibrillation
  -  access to a computer with an Internet connection, access to a mobile phone and was willing to participate in a treatment for their insomnia.
Exclusion criteria:
  -  no access to internet, computer or cellphone.
  -  not understanding the Swedish language
  -  suffering from cognitive disabilities, severe psychiatric disease, severe somatic disease or sleep apnea
  -  suffering from drug abuse
  -  been hospitalised for heart failure, coronary artery disease or atrial fibrillation in the last four weeks
  -  expected survival less than 12 months